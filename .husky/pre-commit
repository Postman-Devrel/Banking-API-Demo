#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running linter on staged files..."
npx lint-staged

echo "ğŸ§ª Running tests..."
npm test

# # Run Postman tests only if API code changed
# if git diff --cached --name-only | grep -qE "src/routes|src/middleware"; then
#   echo "ğŸ“¬ API code changed - Running Postman tests..."
#   postman collection run
# else
#   echo "â­ï¸  No API changes detected, skipping Postman tests"
# fi

echo "ğŸ“¬ API code changed - Running Postman tests..."
postman collection run "postman/collections/[Blueprint] Intergalactic Bank API Reference Documentation.postman_collection.json"

echo "âœ… All pre-commit checks passed!"
